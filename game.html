<body style="overflow: hidden">
<script type="text/javascript" src="./controllers/componnent.js"></script>
<script type="text/javascript" src="./controllers/scene.js"></script>
<script type="text/javascript" src="./controllers/label.js"></script>
<script type="text/javascript" src="./controllers/obstruct.js"></script>
<script type="text/javascript" src="./controllers/charactor.js"></script>
<script type="text/javascript" src="./charactors/main_charactor.js"></script>
<script type="text/javascript" src="./scenes/main_scene.js"></script>
<script type="text/javascript" src="./system.js"></script>
<script type="text/javascript">

var mainScene = new MainScene();
var statusLabel = new Label();

Setup(() => {
    mainScene.setSize(WIDTH, HEIGHT);;

    statusLabel.setBackgroundColor("#ffcc66");
    statusLabel.setOpacity(0.5);
    statusLabel.setPadding(10);
    statusLabel.setSize(200, 160);
    statusLabel.setPosition(10, 10);

    BuildAll(mainScene);
    BuildAll(statusLabel)

    PRIMARY_SCENE = mainScene;
    PRIMARY_SCENE.setup();
});

Loop(() => {
    PRIMARY_SCENE.setSize(WIDTH, HEIGHT);
    PRIMARY_SCENE.player((p) => {
        if (KEY_MAP.shift) {
            p.setSpeed(2.0*2.0);
            p.setOpacity(0.75);
        } else {
            p.setSpeed(2.0);
            p.setOpacity(1.0);
        }

        if (KEY_MAP.w) p.moveSet("up");
        if (KEY_MAP.a) p.moveSet("left");   
        if (KEY_MAP.s) p.moveSet("down"); 
        if (KEY_MAP.d) p.moveSet("right");   
        if (KEY_MAP.w && KEY_MAP.a) p.moveSet("left_up");    
        if (KEY_MAP.s && KEY_MAP.a) p.moveSet("left_down");  
        if (KEY_MAP.w && KEY_MAP.d) p.moveSet("right_up");     
        if (KEY_MAP.s && KEY_MAP.d) p.moveSet("right_down");
    });

    statusLabel.setText(
        "<p>"
            + "FPS: " + FPS + ", ~" + (1000/FPS).toFixed(2) + "ms<br>"
            + "Delay: " + DELAY + "ms <br>"
            + "<br>"
            + "Window: " + WIDTH + ", " + HEIGHT + "<br>"
            + "Mouse: " + MOUSE_X + ", " + MOUSE_Y + "<br>" 
            + "Keyboard: " + KEY_MULTI_PRESSED + "<br>"
        + "</p>"
    );
});

</script>
</body>